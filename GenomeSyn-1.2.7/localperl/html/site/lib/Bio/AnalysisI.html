<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../displayToc.js"></script>
<script language="JavaScript" src="../../../tocParas.js"></script>
<script language="JavaScript" src="../../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../../scineplex.css">
<title></title>
<link rel="stylesheet" href="../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:support@ActiveState.com" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#FEEDBACK">FEEDBACK</a>
    <ul>
      <li><a href="#Mailing-Lists">Mailing Lists</a></li>
      <li><a href="#Support">Support</a></li>
      <li><a href="#Reporting-Bugs">Reporting Bugs</a></li>
    </ul>
  </li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#COPYRIGHT">COPYRIGHT</a></li>
  <li><a href="#DISCLAIMER">DISCLAIMER</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#APPENDIX">APPENDIX</a>
    <ul>
      <li><a href="#analysis_name">analysis_name</a></li>
      <li><a href="#analysis_spec">analysis_spec</a></li>
      <li><a href="#describe">describe</a></li>
      <li><a href="#input_spec">input_spec</a></li>
      <li><a href="#result_spec">result_spec</a></li>
      <li><a href="#create_job">create_job</a></li>
      <li><a href="#run">run</a></li>
      <li><a href="#wait_for">wait_for</a></li>
    </ul>
  </li>
  <li><a href="#Module-Bio::AnalysisI::JobI">Module Bio::AnalysisI::JobI</a>
    <ul>
      <li><a href="#id">id</a></li>
      <li><a href="#Bio::AnalysisI::JobI::run">Bio::AnalysisI::JobI::run</a></li>
      <li><a href="#Bio::AnalysisI::JobI::wait_for">Bio::AnalysisI::JobI::wait_for</a></li>
      <li><a href="#terminate">terminate</a></li>
      <li><a href="#last_event">last_event</a></li>
      <li><a href="#status">status</a></li>
      <li><a href="#created">created</a></li>
      <li><a href="#started">started</a></li>
      <li><a href="#ended">ended</a></li>
      <li><a href="#elapsed">elapsed</a></li>
      <li><a href="#times">times</a></li>
      <li><a href="#results">results</a></li>
      <li><a href="#result">result</a></li>
      <li><a href="#remove">remove</a></li>
    </ul>
  </li>
</ul>

<h1 id="NAME">NAME</h1>

<p>Bio::AnalysisI - An interface to any (local or remote) analysis tool</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<p>This is an interface module - you do not instantiate it. Use <code><code>Bio::Tools::Run::Analysis</code></code> module:</p>

<pre><code><code>  <span class="keyword">use</span> <span class="variable">Bio::Tools::Run::Analysis</span><span class="operator">;</span>
  <span class="keyword">my</span> <span class="variable">$tool</span> <span class="operator">=</span> <span class="variable">Bio::Tools::Run::Analysis</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="variable">@args</span><span class="operator">);</span>
</code></code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This interface contains all public methods for accessing and controlling local and remote analysis tools. It is meant to be used on the client side.</p>

<h1 id="FEEDBACK">FEEDBACK</h1>

<h2 id="Mailing-Lists">Mailing Lists</h2>

<p>User feedback is an integral part of the evolution of this and other Bioperl modules. Send your comments and suggestions preferably to the Bioperl mailing list. Your participation is much appreciated.</p>

<pre><code><code>  bioperl-l@bioperl.org                  - General discussion
  http://bioperl.org/wiki/Mailing_lists  - About the mailing lists</code></code></pre>

<h2 id="Support">Support</h2>

<p>Please direct usage questions or support issues to the mailing list:</p>

<p><i>bioperl-l@bioperl.org</i></p>

<p>rather than to the module maintainer directly. Many experienced and reponsive experts will be able look at the problem and quickly address it. Please include a thorough description of the problem with code and data examples if at all possible.</p>

<h2 id="Reporting-Bugs">Reporting Bugs</h2>

<p>Report bugs to the Bioperl bug tracking system to help us keep track of the bugs and their resolution. Bug reports can be submitted via the web:</p>

<pre><code><code>  https://redmine.open-bio.org/projects/bioperl/</code></code></pre>

<h1 id="AUTHOR">AUTHOR</h1>

<p>Martin Senger (martin.senger@gmail.com)</p>

<h1 id="COPYRIGHT">COPYRIGHT</h1>

<p>Copyright (c) 2003, Martin Senger and EMBL-EBI. All Rights Reserved.</p>

<p>This module is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<h1 id="DISCLAIMER">DISCLAIMER</h1>

<p>This software is provided &quot;as is&quot; without warranty of any kind.</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>http://www.ebi.ac.uk/Tools/webservices/soaplab/guide</p>

<h1 id="APPENDIX">APPENDIX</h1>

<p>This is actually the main documentation...</p>

<p>If you try to call any of these methods directly on this <code><code>Bio::AnalysisI</code></code> object you will get a <i>not implemented</i> error message. You need to call them on a <code><code>Bio::Tools::Run::Analysis</code></code> object instead.</p>

<h2 id="analysis_name">analysis_name</h2>

<pre><code><code> <span class="variable">Usage</span>   <span class="operator">:</span> <span class="variable">$tool</span><span class="operator">-&gt;</span><span class="variable">analysis_name</span><span class="operator">;</span>
 <span class="variable">Returns</span> <span class="operator">:</span> <span class="variable">a</span> <span class="variable">name</span> <span class="variable">of</span> <span class="variable">this</span> <span class="variable">analysis</span>
 <span class="variable">Args</span>    <span class="operator">:</span> <span class="variable">none</span>
</code></code></pre>

<h2 id="analysis_spec">analysis_spec</h2>

<pre><code><code> <span class="variable">Usage</span>   <span class="operator">:</span> <span class="variable">$tool</span><span class="operator">-&gt;</span><span class="variable">analysis_spec</span><span class="operator">;</span>
 <span class="variable">Returns</span> <span class="operator">:</span> <span class="variable">a</span> <span class="variable">hash</span> <span class="variable">reference</span> <span class="variable">describing</span> <span class="variable">this</span> <span class="variable">analysis</span>
 <span class="variable">Args</span>    <span class="operator">:</span> <span class="variable">none</span>
</code></code></pre>

<p>The returned hash reference uses the following keys (not all of them always present, perhaps others present as well): <code><code>name</code></code>, <code><code>type</code></code>, <code><code>version</code></code>, <code><code>supplier</code></code>, <code><code>installation</code></code>, <code><code>description</code></code>.</p>

<p>Here is an example output:</p>

<pre><code><code>  Analysis &#39;edit.seqret&#39;:
        installation =&gt; EMBL-EBI
        description =&gt; Reads and writes (returns) sequences
        supplier =&gt; EMBOSS
        version =&gt; 2.6.0
        type =&gt; edit
        name =&gt; seqret</code></code></pre>

<h2 id="describe">describe</h2>

<pre><code><code> <span class="variable">Usage</span>   <span class="operator">:</span> <span class="variable">$tool</span><span class="operator">-&gt;</span><span class="variable">analysis_spec</span><span class="operator">;</span>
 <span class="variable">Returns</span> <span class="operator">:</span> <span class="variable">an</span> <span class="variable">XML</span> <span class="variable">detailed</span> <span class="variable">description</span> <span class="variable">of</span> <span class="variable">this</span> <span class="variable">analysis</span>
 <span class="variable">Args</span>    <span class="operator">:</span> <span class="variable">none</span>
</code></code></pre>

<p>The returned XML string contains metadata describing this analysis service. It includes also metadata returned (and easier used) by method <code><code>analysis_spec</code></code>, <code><code>input_spec</code></code> and <code><code>result_spec</code></code>.</p>

<p>The DTD used for returned metadata is based on the adopted standard (BSA specification for analysis engine):</p>

<pre><code><code>  &lt;!ELEMENT DsLSRAnalysis (analysis)+&gt;

  &lt;!ELEMENT analysis (description?, input*, output*, extension?)&gt;

  &lt;!ATTLIST analysis
      type          CDATA #REQUIRED
      name          CDATA #IMPLIED
      version       CDATA #IMPLIED
      supplier      CDATA #IMPLIED
      installation  CDATA #IMPLIED&gt;

  &lt;!ELEMENT description ANY&gt;
  &lt;!ELEMENT extension ANY&gt;

  &lt;!ELEMENT input (default?, allowed*, extension?)&gt;

  &lt;!ATTLIST input
      type          CDATA #REQUIRED
      name          CDATA #REQUIRED
      mandatory     (true|false) &quot;false&quot;&gt;

  &lt;!ELEMENT default (#PCDATA)&gt;
  &lt;!ELEMENT allowed (#PCDATA)&gt;

  &lt;!ELEMENT output (extension?)&gt;

  &lt;!ATTLIST output
      type          CDATA #REQUIRED
      name          CDATA #REQUIRED&gt;</code></code></pre>

<p>But the DTD may be extended by provider-specific metadata. For example, the EBI experimental SOAP-based service on top of EMBOSS uses DTD explained at <code><code>http://www.ebi.ac.uk/~senger/applab</code></code>.</p>

<h2 id="input_spec">input_spec</h2>

<pre><code><code> <span class="variable">Usage</span>   <span class="operator">:</span> <span class="variable">$tool</span><span class="operator">-&gt;</span><span class="variable">input_spec</span><span class="operator">;</span>
 <span class="variable">Returns</span> <span class="operator">:</span> <span class="variable">an</span> <span class="variable">array</span> <span class="variable">reference</span> <span class="variable">with</span> <span class="variable">hashes</span> <span class="variable">as</span> <span class="variable">elements</span>
 <span class="variable">Args</span>    <span class="operator">:</span> <span class="variable">none</span>
</code></code></pre>

<p>The analysis input data are named, and can be also associated with a default value, with allowed values and with few other attributes. The names are important for feeding the service with the input data (the inputs are given to methods <code><code>create_job</code></code>, <code><code>Bio::AnalysisI|run</code></code>, and/or <code><code>Bio::AnalysisI|wait_for</code></code> as name/value pairs).</p>

<p>Here is a (slightly shortened) example of an input specification:</p>

<pre><code><code> <span class="variable">$input_spec</span> <span class="operator">=</span> <span class="operator">[</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'sequence_usa'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'sequence_direct_data'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'allowed_values'</span> <span class="operator">=&gt;</span> <span class="operator">[</span>
                                  <span class="string">'gcg'</span><span class="operator">,</span>
                                  <span class="string">'gcg8'</span><span class="operator">,</span>
                                  <span class="operator">...</span>
                                  <span class="string">'raw'</span>
                                <span class="operator">]</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'sformat'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'sbegin'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'send'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'sprotein'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'snucleotide'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'sreverse'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'slower'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'supper'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'default'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'firstonly'</span>
          <span class="operator">}</span><span class="operator">,</span>
          <span class="operator">{</span>
            <span class="string">'mandatory'</span> <span class="operator">=&gt;</span> <span class="string">'false'</span><span class="operator">,</span>
            <span class="string">'default'</span> <span class="operator">=&gt;</span> <span class="string">'fasta'</span><span class="operator">,</span>
            <span class="string">'allowed_values'</span> <span class="operator">=&gt;</span> <span class="operator">[</span>
                                  <span class="string">'gcg'</span><span class="operator">,</span>
                                  <span class="string">'gcg8'</span><span class="operator">,</span>
                                  <span class="string">'embl'</span><span class="operator">,</span>
                                  <span class="operator">...</span>
                                  <span class="string">'raw'</span>
                                <span class="operator">]</span><span class="operator">,</span>
            <span class="string">'type'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
            <span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'osformat'</span>
          <span class="operator">}</span>
        <span class="operator">]</span><span class="operator">;</span>
</code></code></pre>

<h2 id="result_spec">result_spec</h2>

<pre><code><code> <span class="variable">Usage</span>   <span class="operator">:</span> <span class="variable">$tool</span><span class="operator">-&gt;</span><span class="variable">result_spec</span><span class="operator">;</span>
 <span class="variable">Returns</span> <span class="operator">:</span> <span class="variable">a</span> <span class="variable">hash</span> <span class="variable">reference</span> <span class="variable">with</span> <span class="variable">result</span> <span class="variable">names</span> <span class="variable">as</span> <span class="keyword">keys</span>
           <span class="keyword">and</span> <span class="variable">result</span> <span class="variable">types</span> <span class="variable">as</span> <span class="keyword">values</span>
 <span class="variable">Args</span>    <span class="operator">:</span> <span class="variable">none</span>
</code></code></pre>

<p>The analysis results are named and can be retrieved using their names by methods <code><code>results</code></code> and <code><code>result</code></code>.</p>

<p>Here is an example of the result specification (again for the service <i>edit.seqret</i>):</p>

<pre><code><code>  <span class="variable">$result_spec</span> <span class="operator">=</span> <span class="operator">{</span>
          <span class="string">'outseq'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
          <span class="string">'report'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span><span class="operator">,</span>
          <span class="string">'detailed_status'</span> <span class="operator">=&gt;</span> <span class="string">'String'</span>
        <span class="operator">}</span><span class="operator">;</span>
</code></code></pre>

<h2 id="create_job">create_job</h2>

<pre><code><code> <span class="variable">Usage</span>   <span class="operator">:</span> <span class="variable">$tool</span><span class="operator">-&gt;</span><span class="variable">create_job</span> <span class="operator">(</span> <span class="operator">{</span><span class="string">'sequence'</span><span class="operator">=&gt;</span><span class="string">'tatat'</span><span class="operator">}</span> <span class="operator">)</span>
 <span class="variable">Returns</span> <span class="operator">:</span> <span class="variable">Bio::Tools::Run::Analysis::Job</span>
 <span class="variable">Args</span>    <span class="operator">:</span> <span class="variable">data</span> <span class="keyword">and</span> <span class="variable">parameters</span> <span class="keyword">for</span> <span class="variable">this</span> <span class="variable">execution</span>
           <span class="operator">(</span><span class="variable">in</span> <span class="variable">various</span> <span class="variable">formats</span><span class="operator">)</span>
</code></code></pre>

<p>Create an object representing a single execution of this analysis tool.</p>

<p>Call this method if you wish to &quot;stage the scene&quot; - to create a job with all input data but without actually running it. This method is called automatically from other methods (<code><code>Bio::AnalysisI|run</code></code> and <code><code>Bio::AnalysisI|wait_for</code></code>) so usually you do not need to call it directly.</p>

<p>The input data and prameters for this execution can be specified in various ways:</p>

<dl>

<dt id="array-reference">array reference</dt>
<dd>

<p>The array has scalar elements of the form</p>

<pre><code><code>   name = [[@]value]</code></code></pre>

<p>where <code><code>name</code></code> is the name of an input data or input parameter (see method <code><code>input_spec</code></code> for finding what names are recognized by this analysis) and <code><code>value</code></code> is a value for this data/parameter. If <code><code>value</code></code> is missing a 1 is assumed (which is convenient for the boolean options). If <code><code>value</code></code> starts with <code><code>@</code></code> it is treated as a local filename, and its contents is used as the data/parameter value.</p>

</dd>
<dt id="hash-reference">hash reference</dt>
<dd>

<p>The same as with the array reference but now there is no need to use an equal sign. The hash keys are input names and hash values their data. The values can again start with a <code><code>@</code></code> sign indicating a local filename.</p>

</dd>
<dt id="scalar">scalar</dt>
<dd>

<p>In this case, the parameter represents a job ID obtained in some previous invocation - such job already exists on the server side, and we are just re-creating it here using the same job ID.</p>

<p><i>TBD: here we should allow the same by using a reference to the Bio::Tools::Run::Analysis::Job object.</i></p>

</dd>
<dt id="undef">undef</dt>
<dd>

<p>Finally, if the parameter is undefined, ask server to create an empty job. The input data may be added later using <code><code>set_data...</code></code> method(s) - see scripts/papplmaker.PLS for details.</p>

</dd>
</dl>

<h2 id="run">run</h2>

<pre><code><code> Usage   : $tool-&gt;run ( [&#39;sequence=@my.seq&#39;, &#39;osformat=embl&#39;] )
 Returns : Bio::Tools::Run::Analysis::Job,
           representing started job (an execution)
 Args    : the same as for create_job</code></code></pre>

<p>Create a job and start it, but do not wait for its completion.</p>

<h2 id="wait_for">wait_for</h2>

<pre><code><code> <span class="variable">Usage</span>   <span class="operator">:</span> <span class="variable">$tool</span><span class="operator">-&gt;</span><span class="variable">wait_for</span> <span class="operator">(</span> <span class="operator">{</span> <span class="string">'sequence'</span> <span class="operator">=&gt;</span> <span class="string">'@my,file'</span> <span class="operator">}</span> <span class="operator">)</span>
 <span class="variable">Returns</span> <span class="operator">:</span> <span class="variable">Bio::Tools::Run::Analysis::Job</span><span class="operator">,</span>
           <span class="variable">representing</span> <span class="variable">finished</span> <span class="variable">job</span>
 <span class="variable">Args</span>    <span class="operator">:</span> <span class="variable">the</span> <span class="variable">same</span> <span class="variable">as</span> <span class="keyword">for</span> <span class="variable">create_job</span>
</code></code></pre>

<p>Create a job, start it and wait for its completion.</p>

<p>Note that this is a blocking method. It returns only after the executed job finishes, either normally or by an error.</p>

<p>Usually, after this call, you ask for results of the finished job:</p>

<pre><code><code>    <span class="variable">$analysis</span><span class="operator">-&gt;</span><span class="variable">wait_for</span> <span class="operator">(...)-&gt;</span><span class="variable">results</span><span class="operator">;</span>
</code></code></pre>

<h1 id="Module-Bio::AnalysisI::JobI">Module Bio::AnalysisI::JobI</h1>

<p>An interface to the public methods provided by <code><code>Bio::Tools::Run::Analysis::Job</code></code> objects.</p>

<p>The <code><code>Bio::Tools::Run::Analysis::Job</code></code> objects represent a created, running, or finished execution of an analysis tool.</p>

<p>The factory for these objects is module <code><code>Bio::Tools::Run::Analysis</code></code> where the following methods return an <code><code>Bio::Tools::Run::Analysis::Job</code></code> object:</p>

<pre><code><code>    create_job   (returning a prepared job)
    run          (returning a running job)
    wait_for     (returning a finished job)</code></code></pre>

<h2 id="id">id</h2>

<pre><code><code> <span class="variable">Usage</span>   <span class="operator">:</span> <span class="variable">$job</span><span class="operator">-&gt;</span><span class="variable">id</span><span class="operator">;</span>
 <span class="variable">Returns</span> <span class="operator">:</span> <span class="variable">this</span> <span class="variable">job</span> <span class="variable">ID</span>
 <span class="variable">Args</span>    <span class="operator">:</span> <span class="variable">none</span>
</code></code></pre>

<p>Each job (an execution) is identifiable by this unique ID which can be used later to re-create the same job (in other words: to re-connect to the same job). It is useful in cases when a job takes long time to finish and your client program does not want to wait for it within the same session.</p>

<h2 id="Bio::AnalysisI::JobI::run">Bio::AnalysisI::JobI::run</h2>

<pre><code><code> Usage   : $job-&gt;run
 Returns : itself
 Args    : none</code></code></pre>

<p>It starts previously created job. The job already must have all input data filled-in. This differs from the method of the same name of the <code><code>Bio::Tools::Run::Analysis</code></code> object where the <code><code>Bio::AnalysisI::JobI::run</code></code> method creates also a new job allowing to set input data.</p>

<h2 id="Bio::AnalysisI::JobI::wait_for">Bio::AnalysisI::JobI::wait_for</h2>

<pre><code><code> Usage   : $job-&gt;wait_for
 Returns : itself
 Args    : none</code></code></pre>

<p>It waits until a previously started execution of this job finishes.</p>

<h2 id="terminate">terminate</h2>

<pre><code><code> Usage   : $job-&gt;terminate
 Returns : itself
 Args    : none</code></code></pre>

<p>Stop the currently running job (represented by this object). This is a definitive stop, there is no way to resume it later.</p>

<h2 id="last_event">last_event</h2>

<pre><code><code> Usage   : $job-&gt;last_event
 Returns : an XML string
 Args    : none</code></code></pre>

<p>It returns a short XML document showing what happened last with this job. This is the used DTD:</p>

<pre><code><code>   <span class="operator">&lt;!--</span> <span class="variable">place</span> <span class="keyword">for</span> <span class="variable">extensions</span> <span class="operator">--&gt;</span>
   <span class="operator">&lt;!</span><span class="variable">ENTITY</span> <span class="operator">% </span><span class="variable">event_body_template</span> <span class="string">"(state_changed | heartbeat_progress | percent_progress | time_progress | step_progress)"</span><span class="operator">&gt;</span>
   
   <span class="operator">&lt;!</span><span class="variable">ELEMENT</span> <span class="variable">analysis_event</span> <span class="operator">(</span><span class="variable">message</span><span class="operator">?,</span> <span class="operator">(</span><span class="variable">%event_body_template</span><span class="operator">;)?)&gt;</span>
   
   <span class="operator">&lt;!</span><span class="variable">ATTLIST</span> <span class="variable">analysis_event</span>
       <span class="variable">timestamp</span>  <span class="variable">CDATA</span> <span class="comment">#IMPLIED&gt;</span>
   
   <span class="operator">&lt;!</span><span class="variable">ELEMENT</span> <span class="variable">message</span> <span class="operator">(</span><span class="comment">#PCDATA)&gt;</span>
   
   <span class="operator">&lt;!</span><span class="variable">ELEMENT</span> <span class="variable">state_changed</span> <span class="variable">EMPTY</span><span class="operator">&gt;</span>
   <span class="operator">&lt;!</span><span class="variable">ENTITY</span> <span class="operator">% </span><span class="variable">analysis_state</span> <span class="string">"created | running | completed | terminated_by_request | terminated_by_error"</span><span class="operator">&gt;</span>
   <span class="operator">&lt;!</span><span class="variable">ATTLIST</span> <span class="variable">state_changed</span>
       <span class="variable">previous_state</span>  <span class="operator">(</span><span class="variable">%analysis_state</span><span class="operator">;)</span> <span class="string">"created"</span>
       <span class="variable">new_state</span>       <span class="operator">(</span><span class="variable">%analysis_state</span><span class="operator">;)</span> <span class="string">"created"</span><span class="operator">&gt;</span>
   
   <span class="operator">&lt;!</span><span class="variable">ELEMENT</span> <span class="variable">heartbeat_progress</span> <span class="variable">EMPTY</span><span class="operator">&gt;</span>
   
   <span class="operator">&lt;!</span><span class="variable">ELEMENT</span> <span class="variable">percent_progress</span> <span class="variable">EMPTY</span><span class="operator">&gt;</span>
   <span class="operator">&lt;!</span><span class="variable">ATTLIST</span> <span class="variable">percent_progress</span>
       <span class="variable">percentage</span> <span class="variable">CDATA</span> <span class="comment">#REQUIRED&gt;</span>
   
   <span class="operator">&lt;!</span><span class="variable">ELEMENT</span> <span class="variable">time_progress</span> <span class="variable">EMPTY</span><span class="operator">&gt;</span>
   <span class="operator">&lt;!</span><span class="variable">ATTLIST</span> <span class="variable">time_progress</span>
       <span class="variable">remaining</span> <span class="variable">CDATA</span> <span class="comment">#REQUIRED&gt;</span>
   
   <span class="operator">&lt;!</span><span class="variable">ELEMENT</span> <span class="variable">step_progress</span> <span class="variable">EMPTY</span><span class="operator">&gt;</span>
   <span class="operator">&lt;!</span><span class="variable">ATTLIST</span> <span class="variable">step_progress</span>
       <span class="variable">total_steps</span>      <span class="variable">CDATA</span> <span class="comment">#IMPLIED</span>
       <span class="variable">steps_completed</span> <span class="variable">CDATA</span> <span class="comment">#REQUIRED&gt;</span>
</code></code></pre>

<p>Here is an example what is returned after a job was created and started, but before it finishes (note that the example uses an analysis &#39;showdb&#39; which does not need any input data):</p>

<pre><code><code>   <span class="keyword">use</span> <span class="variable">Bio::Tools::Run::Analysis</span><span class="operator">;</span>
   <span class="keyword">print</span> <span class="variable">new</span> <span class="variable">Bio::Tools::Run::Analysis</span> <span class="operator">(</span><span class="string">-name</span> <span class="operator">=&gt;</span> <span class="string">'display.showdb'</span><span class="operator">)</span>
             <span class="operator">-&gt;</span><span class="variable">run</span>
             <span class="operator">-&gt;</span><span class="variable">last_event</span><span class="operator">;</span>
</code></code></pre>

<p>It prints:</p>

<pre><code><code>   &lt;?xml version = &quot;1.0&quot;?&gt;
   &lt;analysis_event&gt;
     &lt;message&gt;Mar 3, 2003 5:14:46 PM (Europe/London)&lt;/message&gt;
     &lt;state_changed previous_state=&quot;created&quot; new_state=&quot;running&quot;/&gt;
   &lt;/analysis_event&gt;</code></code></pre>

<p>The same example but now after it finishes:</p>

<pre><code><code>   <span class="keyword">use</span> <span class="variable">Bio::Tools::Run::Analysis</span><span class="operator">;</span>
   <span class="keyword">print</span> <span class="variable">new</span> <span class="variable">Bio::Tools::Run::Analysis</span> <span class="operator">(</span><span class="string">-name</span> <span class="operator">=&gt;</span> <span class="string">'display.showdb'</span><span class="operator">)</span>
             <span class="operator">-&gt;</span><span class="variable">wait_for</span>
             <span class="operator">-&gt;</span><span class="variable">last_event</span><span class="operator">;</span>
   
   <span class="operator">&lt;?</span><span class="variable">xml</span> <span class="variable">version</span> <span class="operator">=</span> <span class="string">"1.0"</span><span class="operator">?&gt;</span>
   <span class="operator">&lt;</span><span class="variable">analysis_event</span><span class="operator">&gt;</span>
     <span class="operator">&lt;</span><span class="variable">message</span><span class="operator">&gt;</span><span class="variable">Mar</span> <span class="number">3</span><span class="operator">,</span> <span class="number">2003</span> <span class="number">5</span><span class="operator">:</span><span class="number">17</span><span class="operator">:</span><span class="number">14</span> <span class="variable">PM</span> <span class="operator">(</span><span class="variable">Europe</span><span class="operator">/</span><span class="variable">London</span><span class="operator">)&lt;/</span><span class="variable">message</span><span class="operator">&gt;</span>
     <span class="operator">&lt;</span><span class="variable">state_changed</span> <span class="variable">previous_state</span><span class="operator">=</span><span class="string">"running"</span> <span class="variable">new_state</span><span class="operator">=</span><span class="string">"completed"</span><span class="operator">/&gt;</span>
   <span class="operator">&lt;/</span><span class="variable">analysis_event</span><span class="operator">&gt;</span>
</code></code></pre>

<h2 id="status">status</h2>

<pre><code><code> Usage   : $job-&gt;status
 Returns : string describing the job status
 Args    : none</code></code></pre>

<p>It returns one of the following strings (and perhaps more if a server implementation extended possible job states):</p>

<pre><code><code>   CREATED
   RUNNING
   COMPLETED
   TERMINATED_BY_REQUEST
   TERMINATED_BY_ERROR</code></code></pre>

<h2 id="created">created</h2>

<pre><code><code> Usage   : $job-&gt;created (1)
 Returns : time when this job was created
 Args    : optional</code></code></pre>

<p>Without any argument it returns a time of creation of this job in seconds, counting from the beginning of the UNIX epoch (1.1.1970). With a true argument it returns a formatted time, using rules described in <code><code>Bio::Tools::Run::Analysis::Utils::format_time</code></code>.</p>

<h2 id="started">started</h2>

<pre><code><code> Usage   : $job-&gt;started (1)
 Returns : time when this job was started
 Args    : optional</code></code></pre>

<p>See <code><code>created</code></code>.</p>

<h2 id="ended">ended</h2>

<pre><code><code> Usage   : $job-&gt;ended (1)
 Returns : time when this job was terminated
 Args    : optional</code></code></pre>

<p>See <code><code>created</code></code>.</p>

<h2 id="elapsed">elapsed</h2>

<pre><code><code> Usage   : $job-&gt;elapsed
 Returns : elapsed time of the execution of the given job
           (in milliseconds), or 0 of job was not yet started
 Args    : none</code></code></pre>

<p>Note that some server implementations cannot count in millisecond - so the returned time may be rounded to seconds.</p>

<h2 id="times">times</h2>

<pre><code><code> Usage   : $job-&gt;times (&#39;formatted&#39;)
 Returns : a hash refrence with all time characteristics
 Args    : optional</code></code></pre>

<p>It is a convenient method returning a hash reference with the folowing keys:</p>

<pre><code><code>   created
   started
   ended
   elapsed</code></code></pre>

<p>See <code><code>create</code></code> for remarks on time formating.</p>

<p>An example - both for unformatted and formatted times:</p>

<pre><code><code>   <span class="keyword">use</span> <span class="variable">Data::Dumper</span><span class="operator">;</span>
   <span class="keyword">use</span> <span class="variable">Bio::Tools::Run::Analysis</span><span class="operator">;</span>
   <span class="keyword">my</span> <span class="variable">$rh</span> <span class="operator">=</span> <span class="variable">Bio::Tools::Run::Analysis</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="string">-name</span> <span class="operator">=&gt;</span> <span class="string">'nucleic_cpg_islands.cpgplot'</span><span class="operator">)</span>
             <span class="operator">-&gt;</span><span class="variable">wait_for</span> <span class="operator">(</span> <span class="operator">{</span> <span class="string">'sequence_usa'</span> <span class="operator">=&gt;</span> <span class="string">'embl:hsu52852'</span> <span class="operator">}</span> <span class="operator">)</span>
             <span class="operator">-&gt;</span><span class="variable">times</span> <span class="operator">(</span><span class="number">1</span><span class="operator">);</span>
   <span class="keyword">print</span> <span class="variable">Data::Dumper</span><span class="operator">-&gt;</span><span class="variable">Dump</span> <span class="operator">(</span> <span class="operator">[</span><span class="variable">$rh</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="string">'Times'</span><span class="operator">]</span><span class="operator">);</span>
   <span class="variable">$rh</span> <span class="operator">=</span> <span class="variable">Bio::Tools::Run::Analysis</span><span class="operator">-&gt;</span><span class="variable">new</span><span class="operator">(</span><span class="string">-name</span> <span class="operator">=&gt;</span> <span class="string">'nucleic_cpg_islands.cpgplot'</span><span class="operator">)</span>
             <span class="operator">-&gt;</span><span class="variable">wait_for</span> <span class="operator">(</span> <span class="operator">{</span> <span class="string">'sequence_usa'</span> <span class="operator">=&gt;</span> <span class="string">'embl:AL499624'</span> <span class="operator">}</span> <span class="operator">)</span>
             <span class="operator">-&gt;</span><span class="variable">times</span><span class="operator">;</span>
   <span class="keyword">print</span> <span class="variable">Data::Dumper</span><span class="operator">-&gt;</span><span class="variable">Dump</span> <span class="operator">(</span> <span class="operator">[</span><span class="variable">$rh</span><span class="operator">]</span><span class="operator">,</span> <span class="operator">[</span><span class="string">'Times'</span><span class="operator">]</span><span class="operator">);</span>
   
   <span class="variable">$Times</span> <span class="operator">=</span> <span class="operator">{</span>
           <span class="string">'ended'</span>   <span class="operator">=&gt;</span> <span class="string">'Mon Mar  3 17:52:06 2003'</span><span class="operator">,</span>
           <span class="string">'started'</span> <span class="operator">=&gt;</span> <span class="string">'Mon Mar  3 17:52:05 2003'</span><span class="operator">,</span>
           <span class="string">'elapsed'</span> <span class="operator">=&gt;</span> <span class="string">'1000'</span><span class="operator">,</span>
           <span class="string">'created'</span> <span class="operator">=&gt;</span> <span class="string">'Mon Mar  3 17:52:05 2003'</span>
         <span class="operator">}</span><span class="operator">;</span>
   <span class="variable">$Times</span> <span class="operator">=</span> <span class="operator">{</span>
           <span class="string">'ended'</span>   <span class="operator">=&gt;</span> <span class="string">'1046713961'</span><span class="operator">,</span>
           <span class="string">'started'</span> <span class="operator">=&gt;</span> <span class="string">'1046713926'</span><span class="operator">,</span>
           <span class="string">'elapsed'</span> <span class="operator">=&gt;</span> <span class="string">'35000'</span><span class="operator">,</span>
           <span class="string">'created'</span> <span class="operator">=&gt;</span> <span class="string">'1046713926'</span>
         <span class="operator">}</span><span class="operator">;</span>
</code></code></pre>

<h2 id="results">results</h2>

<pre><code><code> Usage   : $job-&gt;results (...)
 Returns : one or more results created by this job
 Args    : various, see belou</code></code></pre>

<p>This is a complex method trying to make sense for all kinds of results. Especially it tries to help to put binary results (such as images) into local files. Generally it deals with fhe following facts:</p>

<ul>

<li><p>Each analysis tool may produce more results.</p>

</li>
<li><p>Some results may contain binary data not suitable for printing into a terminal window.</p>

</li>
<li><p>Some results may be split into variable number of parts (this is mainly true for the image results that can consist of more *.png files).</p>

</li>
</ul>

<p>Note also that results have names to distinguish if there are more of them. The names can be obtained by method <code><code>result_spec</code></code>.</p>

<p>Here are the rules how the method works:</p>

<pre><code><code>    <span class="variable">Retrieving</span> <span class="variable">NAMED</span> <span class="variable">results</span><span class="operator">:</span>
    <span class="operator">-------------------------</span>
     <span class="variable">results</span> <span class="operator">(</span><span class="string">'name1'</span><span class="operator">,</span> <span class="operator">...)</span>   <span class="operator">=&gt;</span> <span class="keyword">return</span> <span class="variable">results</span> <span class="variable">as</span> <span class="variable">they</span> <span class="variable">are</span><span class="operator">,</span> <span class="keyword">no</span> <span class="variable">storing</span> <span class="variable">into</span> <span class="variable">files</span>
    
     <span class="variable">results</span> <span class="operator">(</span> <span class="operator">{</span> <span class="string">'name1'</span> <span class="operator">=&gt;</span> <span class="string">'filename'</span><span class="operator">,</span> <span class="operator">...</span> <span class="operator">}</span> <span class="operator">)</span>  <span class="operator">=&gt;</span> <span class="variable">store</span> <span class="variable">into</span> <span class="string">'filename'</span><span class="operator">,</span> <span class="keyword">return</span> <span class="string">'filename'</span>
     <span class="variable">results</span> <span class="operator">(</span> <span class="string">'name1=filename'</span><span class="operator">,</span> <span class="operator">...)</span>            <span class="operator">=&gt;</span> <span class="variable">ditto</span>
    
     <span class="variable">results</span> <span class="operator">(</span> <span class="operator">{</span> <span class="string">'name1'</span> <span class="operator">=&gt;</span> <span class="string">'-'</span><span class="operator">,</span> <span class="operator">...</span> <span class="operator">}</span> <span class="operator">)</span>         <span class="operator">=&gt;</span> <span class="keyword">send</span> <span class="variable">result</span> <span class="variable">to</span> <span class="variable">the</span> <span class="variable">STDOUT</span><span class="operator">,</span> <span class="keyword">do</span> <span class="keyword">not</span> <span class="keyword">return</span> <span class="variable">anything</span>
     <span class="variable">results</span> <span class="operator">(</span> <span class="string">'name1=-'</span><span class="operator">,</span> <span class="operator">...)</span>                   <span class="operator">=&gt;</span> <span class="variable">ditto</span>
    
     <span class="variable">results</span> <span class="operator">(</span> <span class="operator">{</span> <span class="string">'name1'</span> <span class="operator">=&gt;</span> <span class="string">'@'</span><span class="operator">,</span> <span class="operator">...</span> <span class="operator">}</span> <span class="operator">)</span>  <span class="operator">=&gt;</span> <span class="variable">store</span> <span class="variable">into</span> <span class="variable">file</span> <span class="variable">whose</span> <span class="variable">name</span> <span class="variable">is</span> <span class="variable">invented</span> <span class="variable">by</span>
                                             <span class="variable">this</span> <span class="variable">method</span><span class="operator">,</span> <span class="variable">perhaps</span> <span class="variable">using</span> <span class="variable">RESULT_NAME_TEMPLATE</span> <span class="variable">env</span>
     <span class="variable">results</span> <span class="operator">(</span> <span class="string">'name1=@'</span><span class="operator">,</span> <span class="operator">...)</span>            <span class="operator">=&gt;</span> <span class="variable">ditto</span>
    
     <span class="variable">results</span> <span class="operator">(</span> <span class="operator">{</span> <span class="string">'name1'</span> <span class="operator">=&gt;</span> <span class="string">'?'</span><span class="operator">,</span> <span class="operator">...</span> <span class="operator">}</span> <span class="operator">)</span>  <span class="operator">=&gt;</span> <span class="variable">find</span> <span class="variable">of</span> <span class="variable">what</span> <span class="variable">type</span> <span class="variable">is</span> <span class="variable">this</span> <span class="variable">result</span> <span class="keyword">and</span> <span class="variable">then</span> <span class="keyword">use</span>
                                             <span class="operator">{</span><span class="string">'name1'</span><span class="operator">=&gt;</span><span class="string">'@'</span> <span class="keyword">for</span> <span class="variable">binary</span> <span class="variable">files</span><span class="operator">,</span> <span class="keyword">and</span> <span class="variable">a</span> <span class="variable">regular</span>
                                             <span class="keyword">return</span> <span class="keyword">for</span> <span class="variable">non</span><span class="operator">-</span><span class="variable">binary</span> <span class="variable">files</span>
     <span class="variable">results</span> <span class="operator">(</span> <span class="string">'name=?'</span><span class="operator">,</span> <span class="operator">...)</span>             <span class="operator">=&gt;</span> <span class="variable">ditto</span>
    
    <span class="variable">Retrieving</span> <span class="variable">ALL</span> <span class="variable">results</span><span class="operator">:</span>
    <span class="operator">-----------------------</span>
     <span class="variable">results</span><span class="operator">()</span>     <span class="operator">=&gt;</span> <span class="keyword">return</span> <span class="variable">all</span> <span class="variable">results</span> <span class="variable">as</span> <span class="variable">they</span> <span class="variable">are</span><span class="operator">,</span> <span class="keyword">no</span> <span class="variable">storing</span> <span class="variable">into</span> <span class="variable">files</span>
    
     <span class="variable">results</span> <span class="operator">(</span><span class="string">'@'</span><span class="operator">)</span> <span class="operator">=&gt;</span> <span class="keyword">return</span> <span class="variable">all</span> <span class="variable">results</span><span class="operator">,</span> <span class="variable">as</span> <span class="keyword">if</span> <span class="keyword">each</span> <span class="variable">of</span> <span class="variable">them</span> <span class="keyword">given</span>
                      <span class="variable">as</span> <span class="operator">{</span><span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'@'</span><span class="operator">}</span> <span class="operator">(</span><span class="variable">see</span> <span class="variable">above</span><span class="operator">)</span>
    
     <span class="variable">results</span> <span class="operator">(</span><span class="string">'?'</span><span class="operator">)</span> <span class="operator">=&gt;</span> <span class="keyword">return</span> <span class="variable">all</span> <span class="variable">results</span><span class="operator">,</span> <span class="variable">as</span> <span class="keyword">if</span> <span class="keyword">each</span> <span class="variable">of</span> <span class="variable">them</span> <span class="keyword">given</span>
                      <span class="variable">as</span> <span class="operator">{</span><span class="string">'name'</span> <span class="operator">=&gt;</span> <span class="string">'?'</span><span class="operator">}</span> <span class="operator">(</span><span class="variable">see</span> <span class="variable">above</span><span class="operator">)</span>
    
    <span class="variable">Misc</span><span class="operator">:</span>
    <span class="operator">-----</span>
     <span class="operator">*</span> <span class="variable">any</span> <span class="variable">result</span> <span class="variable">can</span> <span class="variable">be</span> <span class="variable">returned</span> <span class="variable">as</span> <span class="variable">a</span> <span class="keyword">scalar</span> <span class="variable">value</span><span class="operator">,</span> <span class="keyword">or</span> <span class="variable">as</span> <span class="variable">an</span> <span class="variable">array</span> <span class="variable">reference</span>
       <span class="operator">(</span><span class="variable">the</span> <span class="variable">latter</span> <span class="variable">is</span> <span class="variable">used</span> <span class="keyword">for</span> <span class="variable">results</span> <span class="variable">consisting</span> <span class="variable">of</span> <span class="variable">more</span> <span class="variable">parts</span><span class="operator">,</span> <span class="variable">such</span> <span class="variable">images</span><span class="operator">);</span>
       <span class="variable">this</span> <span class="variable">applies</span> <span class="variable">regardless</span> <span class="variable">whether</span> <span class="variable">the</span> <span class="variable">returned</span> <span class="variable">result</span> <span class="variable">is</span> <span class="variable">the</span> <span class="variable">result</span> <span class="variable">itself</span>
       <span class="keyword">or</span> <span class="variable">a</span> <span class="variable">filename</span> <span class="variable">created</span> <span class="keyword">for</span> <span class="variable">the</span> <span class="variable">result</span>
    
     <span class="operator">*</span> <span class="variable">look</span> <span class="variable">in</span> <span class="variable">the</span> <span class="variable">documentation</span> <span class="variable">of</span> <span class="variable">the</span> <span class="variable">C</span><span class="operator">&lt;</span><span class="variable">panalysis</span><span class="operator">[</span><span class="operator">.</span><span class="variable">PLS</span><span class="operator">]</span><span class="operator">&gt;</span> <span class="variable">script</span> <span class="keyword">for</span> <span class="variable">examples</span>
       <span class="operator">(</span><span class="variable">especially</span> <span class="variable">how</span> <span class="variable">to</span> <span class="keyword">use</span> <span class="variable">various</span> <span class="variable">templates</span> <span class="keyword">for</span> <span class="variable">inventing</span> <span class="variable">file</span> <span class="variable">names</span><span class="operator">)</span>
</code></code></pre>

<h2 id="result">result</h2>

<pre><code><code> Usage   : $job-&gt;result (...)
 Returns : the first result
 Args    : see &#39;results&#39;</code></code></pre>

<h2 id="remove">remove</h2>

<pre><code><code> Usage   : $job-&gt;remove
 Returns : 1
 Args    : none</code></code></pre>

<p>The job object is not actually removed in this time but it is marked (setting 1 to <code><code>_destroy_on_exit</code></code> attribute) as ready for deletion when the client program ends (including a request to server to forget the job mirror object on the server side).</p>


</body>

</html>


