<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../displayToc.js"></script>
<script language="JavaScript" src="../tocParas.js"></script>
<script language="JavaScript" src="../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../scineplex.css">
<title></title>
<link rel="stylesheet" href="../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:support@ActiveState.com" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#USAGE">USAGE</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#ARGUMENTS">ARGUMENTS</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>stag-grep.pl - filters a stag file (xml, itext, sxpr) for nodes of interest</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code><code>  <span class="variable">stag</span><span class="operator">-</span><span class="keyword">grep</span><span class="operator">.</span><span class="variable">pl</span> <span class="variable">person</span> <span class="operator">-</span><span class="string">q name=fred file1.xml
  
  stag-grep.pl person</span> <span class="string">'sub {shift-&gt;get_name =~ /^A*/}'</span> <span class="variable">file1</span><span class="operator">.</span><span class="variable">xml</span>
  
  <span class="variable">stag</span><span class="operator">-</span><span class="keyword">grep</span><span class="operator">.</span><span class="variable">pl</span> <span class="keyword">-p</span> <span class="variable">My::Foo</span> <span class="keyword">-w</span> <span class="variable">sxpr</span> <span class="variable">record</span> <span class="string">'sub{..}'</span> <span class="variable">file2</span>
</code></code></pre>

<h1 id="USAGE">USAGE</h1>

<pre><code><code>  stag-grep.pl [-p|parser PARSER] [-w|writer WRITER] NODE -q tag=val FILE

  stag-grep.pl [-p|parser PARSER] [-w|writer WRITER] NODE SUB FILE

  stag-grep.pl [-p|parser PARSER] [-w|writer WRITER]  NODE -f PERLFILE FILE</code></code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>parsers an input file using the specified parser (which may be a built in stag parser, such as xml) and filters the resulting stag tree according to a user-supplied subroutine, writing out only the nodes/elements that pass the test.</p>

<p>the parser is event based, so it should be able to handle large files (although if the node you parse is large, it will take up more memory)</p>

<h1 id="ARGUMENTS">ARGUMENTS</h1>

<dl>

<dt id="p-parser-FORMAT">-p|parser FORMAT</dt>
<dd>

<p>FORMAT is one of xml, sxpr or itext, or the name of a perl module</p>

<p>xml assumed as default</p>

</dd>
<dt id="w-writer-FORMAT">-w|writer FORMAT</dt>
<dd>

<p>FORMAT is one of xml, sxpr or itext, or the name of a perl module</p>

</dd>
<dt id="c-count">-c|count</dt>
<dd>

<p>prints the number of nodes that pass the test</p>

</dd>
<dt id="filterfile-f">-filterfile|f</dt>
<dd>

<p>a file containing a perl subroutine (in place of the SUB argument)</p>

</dd>
<dt id="q-query-TAG1-VAL1--q-query-TAG2-VAL2-...--q-query-TAGN-VALN">-q|query TAG1=VAL1 -q|query TAG2=VAL2 ... -q|query TAGN=VALN</dt>
<dd>

<p>filters based on the field TAG</p>

<p>other operators can be used too - eg &lt;, &lt;=, etc</p>

<p>multiple q arguments can be passed in</p>

<p>for more complex operations, pass in your own subroutine, see below</p>

</dd>
<dt id="SUB">SUB</dt>
<dd>

<p>a perl subroutine. this subroutine is evaluated evry time NODE is encountered - the stag object for NODE is passed into the subroutine.</p>

<p>if the subroutine passes, the node will be passed to the writer for display</p>

</dd>
<dt id="NODE">NODE</dt>
<dd>

<p>the name of the node/element we are filtering on</p>

</dd>
<dt id="FILE">FILE</dt>
<dd>

<p>the file to be parser. If no parser option is supplied, this is assumed to a be a stag compatible syntax (xml, sxpr or itext); otherwise you should parse in a parser name or a parser module that throws stag events</p>

</dd>
</dl>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p><a href="../../.cpan/build/Data-Stag-0.11-NlX_Og/blib/lib/Data/Stag.html">Data::Stag</a></p>


</body>

</html>


